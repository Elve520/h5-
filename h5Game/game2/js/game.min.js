	var time;//时长，单位：毫秒
	var timeCounter;//计时器
	var begin; //是否进行中
	var startTime,endTime;
	
	var  interval = 100,count = 0;//用于修正倒计时
	time = 20*1000;//毫秒单位，持续时间
	begin = false;
	$('.countdown').text((time/1000).toFixed(2));
	//游戏开始
	$('.js-go-btn').on('touchstart',function(){
		$('.go-start').hide();
			begin = true;
			countdown();//倒计时
			game();
	});






//倒计时,倒计时结束，游戏结束
function countdown(){
	if(begin){
		//倒计时
       startTime = new Date().getTime();
		if( time > 0){
       	   timeCounter = setTimeout(countDownStart,interval);                  
		}
	}
}
function countDownStart(){
       count++;
       var offset = new Date().getTime() - (startTime + count * interval);
       var nextTime = interval - offset;
       var daytohour = 0; 
       if (nextTime < 0) { nextTime = 0; };
       time -= interval;
       
       if(time <= 0){
    	   $('.countdown').text('00.00');
       }else{
    	   $('.countdown').text((time/1000).toFixed(2));
       }
       
       if(time < 0){
    	    endTime=new Date().getTime();
    	    $('.score-add').remove();
    	    
            clearTimeout(timeCounter);
			begin = false;
			ctx.clearRect(0,0,canvasW,canvasH);
			alert('游戏结束');
       }else{
            timeCounter = setTimeout(countDownStart,nextTime);
       }
 }
window.addEventListener('touchstart', function(){ passive: false; });
